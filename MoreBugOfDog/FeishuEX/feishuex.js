
const MoreBugOfDog_feishuex_picture = "data:image/png;base64,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

const MoreBugOfDog_feishuex_extensionId = "feishuex";

/** @typedef {string|number|boolean} SCarg 来自Scratch圆形框的参数，虽然这个框可能只能输入数字，但是可以放入变量，因此有可能获得数字、布尔和文本（极端情况下还有 null 或 undefined，需要同时处理 */

class feishuex {
    constructor(runtime) {
        this.runtime = runtime;
       
        this._formatMessage = runtime.getFormatMessage({
            "zh-cn": {
                "feishuex.name": "啸天犬的飞书机器人",
                "feishuex.msg": "向webhook地址[webhook]发送[msg]",
                "feishuex.at": "向webhook地址[webhok_at]@ openid是[openid_at]群成员[name_at]",
                "feishuex.atposs": "向webhook地址[webhok_at_poss]@所有人",
                "feishuex.my": "向webhook地址[webhok_my]发送自定义的消息,消息内容[msg_my]",
            },
            en: {
                "feishuex.name": "MoreBugOfDog's feishu robot",
                "feishuex.msg": "Send [msg] to webhook address [webhook]",
                "feishuex.at": "To webhook address [webhok_at]at openid is a member of the [openid_at] group [name_at]",
                "feishuex.atposs": "To the webhook address [webhok_at_poss] @everyone",
                "feishuex.my": "Sends a custom message to the webhook address [webhok_at_poss] with the message content [msg_my]",
            }
        })
    }

    /**
     * 翻译
     * @param {string} id
     * @return {string}
     */
    formatMessage(id) {
        return this._formatMessage({
            id,
            default: id,
            description: id
        });
    }

    getInfo() {
        return {
            id: MoreBugOfDog_feishuex_extensionId, // 拓展id
            name: this.formatMessage("feishuex.name"), // 拓展名
            blockIconURI: MoreBugOfDog_feishuex_icon,
            menuIconURI: MoreBugOfDog_feishuex_icon,
            color1: "#EC3838",
            color2: "#B32B2B",
            blocks: [
                {
                    opcode: "msg",
                    blockType: "command",
                    text: this.formatMessage("feishuex.msg"),
                    arguments: {
                        webhook: {
                            type: "string",
                            defaultValue: 'https://open.feishu.cn/xxxx',
                        },
                        msg:{
                            type: "string",
                            defaultValue: '你好hello',
                        }
                    },
                },
                {
                    opcode: "at",
                    blockType: "command",
                    text: this.formatMessage("feishuex.at"),
                    arguments: {
                        webhook_at: {
                            type: "string",
                            defaultValue: 'https://open.feishu.cn/xxxx',
                        },
                        openid_at: {
                            type: "sring",
                            defaultValue: 'xxx',
                        },
                        name_at: {
                            type: "sring",
                            defaultValue: '多bug的啸天犬',
                        }
                    },
                },
                {
                    opcode: "atposs",
                    blockType: "command",
                    text: this.formatMessage("feishuex.atposs"),
                    arguments: {
                        webhook_at_poss: {
                            type: "string",
                            defaultValue: 'https://open.feishu.cn/xxxx',
                        },
                    },
                },
                {
                    opcode: "my",
                    blockType: "command",
                    text: this.formatMessage("feishuex.my"),
                    arguments: {
                        webhook_my: {
                            type: "string",
                            defaultValue: 'https://open.feishu.cn/xxxx',
                        },
                        msg_my: {
                            type: "string",
                            defaultValue: '你好hello',
                        },
                    },
                },
            ],
            
        };
    }

    /** 打开教程 */
    docs() {
        let a = document.createElement('a');
        a.href = "xxx";
        a.rel = "noopener noreferrer";
        a.target = "_blank";
        a.click();
    }
    //开始写积木
    //往webhook地址发送消息
    msg(msg) {
       //想msg.webhook发送post请求
        
        let xhr = new XMLHttpRequest();
        xhr.open("POST", msg.webhook);
        //设置请求头
        xhr.setRequestHeader("Content-Type", "application/json");
        //设置请求体 
        xhr.send({"msg_type":msg.msg,"content":{"text":"request example"}});
        //控制台输出返回结果
        xhr.onload = function() {
            //返回状态详细见飞书webhook机器人文档
            console.log(xhr.responseText);
         }


   
}

window.tempExt = {
    Extension: feishuex,
    info: {
        name: "feishuex.name",
        description: "feishuex.descp",
        extensionId: MoreBugOfDog_feishuex_extensionId,
        iconURL: MoreBugOfDog_feishuex_picture,
        insetIconURL: MoreBugOfDog_feishuex_icon,
        featured: true,
        disabled: false,
        collaborator: "多bug的啸天犬@ CCW"
    },
    l10n: {
        "zh-cn": {
            "feishuex.name": "啸天犬的飞书机器人",
            "feishuex.descp": "调用飞书webhook机器人！"
        },
        en: {
            "feishuex.name": "MoreBugOfDog's feishu robot",
            "feishuex.descp": "Call the feishu webhook robot!"
        }
    }
};